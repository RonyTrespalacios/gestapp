<div class="dashboard-container">
  <!-- AI Chat Widget -->
  <app-ai-chat-widget #chatWidget></app-ai-chat-widget>

  <div class="dashboard-header">
    <h1>Dashboard</h1>
    <p class="subtitle">Vista general de tus finanzas</p>
  </div>

  <div class="loading-section" *ngIf="isLoading">
    <p>Cargando datos...</p>
  </div>

  <!-- Componente de KPIs -->
  <app-dashboard-kpis
    *ngIf="!isLoading"
    [totalLiquidity]="totalLiquidity"
    [cashFlow]="cashFlow"
    [discrepancy]="discrepancy"
    [formattedLiquidity]="formattedLiquidity"
    [formattedCashFlow]="formattedCashFlow"
    [formattedDiscrepancy]="formattedDiscrepancy"
    [isDiscrepancyAcceptable]="isDiscrepancyAcceptable"
    (reconcileClick)="onReconcileClick()">
  </app-dashboard-kpis>

  <!-- Componente de gráfica de línea (acumulado) -->
  <app-cash-flow-chart
    *ngIf="!isLoading"
    [transactions]="transactions">
  </app-cash-flow-chart>

  <!-- Componente de gráfica de barras (mensual) -->
  <app-cash-flow-bars
    *ngIf="!isLoading"
    [transactions]="transactions">
  </app-cash-flow-bars>

  <!-- Fila compartida: Categorías y Runway -->
  <div class="charts-row" *ngIf="!isLoading">
    <app-category-bars
      [transactions]="transactions">
    </app-category-bars>
    
    <app-runway-bars
      [totalLiquidity]="totalLiquidity">
    </app-runway-bars>
  </div>

  <!-- Componente Top 5 Transacciones -->
  <app-top-transactions
    *ngIf="!isLoading"
    [transactions]="transactions">
  </app-top-transactions>
</div>

